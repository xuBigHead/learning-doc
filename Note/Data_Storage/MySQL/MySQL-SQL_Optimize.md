# SQL 优化
## SQL 改写的原则
SQL 当索引优化无效的时候就需要考虑改写 SQL 来适应正确的索引了。

- 使用 outer join 代替 not in

    前面说到过，当在 where 中使用 not in 或则是 `<>` 时，将无法使用索引。

- 使用 CTE 代替子查询

    公共表表达式，前面讲解过了

- 拆分复杂的大 SQL 为多个简单的小 SQL

    一个 SQL 只能用到一个 CPU 核心查询，不能并发的执行。在 8.1.5 中，只有部分有一些改进了，但是还不太好。

- 巧用计算列优化查询